<!DOCTYPE html>
<html lang="en">
<head>
  <title>Gender</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="/static/style.css">
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" type="text/css">
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

</head>
<body id="myPage" data-spy="scroll" data-target=".navbar" data-offset="50">

<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>
      <a class="navbar-brand" href="#myPage">Gender identification</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#myPage">HOME</a></li>
        <li><a href="#band">TEAM</a></li>
        <li><a href="#tour">PREDICT</a></li>
        <li><a href="#contact">CONTACT</a></li>
      </ul>
    </div>
  </div>
</nav>

<div id="myCarousel" class="carousel slide" data-ride="carousel">
  <!-- Wrapper for slides -->
  <div class="carousel-inner" role="listbox">
    <div class="item active">
      <img src="https://www.linkpicture.com/q/home_11.png">
      <div class="carousel-caption">
      </div>      
    </div>

    <div class="item">
      <img src="https://www.linkpicture.com/q/workflow_2.png">
      <div class="carousel-caption">
      </div> 
    </div>

    <div class="item">
      <img src="https://www.linkpicture.com/q/models_2.png">
      <div class="carousel-caption">
        <p id="Xception" ><a href="https://ieeexplore.ieee.org/document/8099678" target="_blank">Read more about Xception</a></p>
        <p id="VGG16" ><a href="https://medium.com/coinmonks/paper-review-of-vggnet-1st-runner-up-of-ilsvlc-2014-image-classification-d02355543a11" target="_blank">Read more about VGG16</a></p>
        <p id="Efficientnet" ><a href="https://paperswithcode.com/method/efficientnet" target="_blank">Read more about EfficientNet</a></p>
        <p id="Nasnet" ><a href="https://sh-tsang.medium.com/review-nasnet-neural-architecture-search-network-image-classification-23139ea0425d" target="_blank">Read more about NasNet</a></p>
      </div> 
    </div>
  </div>

  <!-- Left and right controls -->
  <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
    <span class="glyphicon glyphicon-chevron-left" style="color: black;" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
    <span class="glyphicon glyphicon-chevron-right" style="color: black;" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

<!-- Container (The team Section) -->
<div id="band" class="container text-center">
  <h3>THE TEAM</h3>
  <br>
  <br>
  <div class="row">

    <div class="col-sm-3">
      <p class="text-center" style="font-size: large;"><strong>Irina Rabaev</strong></p><br>
      <a href="#demo" data-toggle="collapse">
        <img src="https://i.ibb.co/DQSPsjk/irina.jpg" class="img-circle person" width="255" height="255">
      </a>
      <div id="demo" class="collapse">
        <p style="font-size: large;">Irina Rabaev received her Ph.D. in Computer Science from Ben-Gurion University of the Negev, Israel. She is currently a faculty member at Department of Software Engineering of Shamoon Academic College of Engineering, Beer-Sheva, Israel. Her main research interests include the areas of computer vision and image processing with a focus on historical documents analysis.</p>
      </div>
    </div>

    <div class="col-sm-3">
      <p class="text-center" style="font-size: large;"><strong>Marina Litvak</strong></p><br>
      <a href="#demo2" data-toggle="collapse">
        <img src="https://i.ibb.co/M514byK/marina.webp" class="img-circle person" alt="Random Name" width="255" height="255">
      </a>
      <div id="demo2" class="collapse">
        <p style="font-size: large;">Marina Litvak has obtained a Ph.D. in Information Systems Engineering from Ben-Gurion University of the Negev in 2010. She is currently a faculty member at Department of Software Engineering of Shamoon Academic College of Engineering in Beer Sheva, Israel. Her research interests include information retrieval, data mining, text mining, text analysis, recommender systems, and social media.</p>
      </div>
    </div>

    <div class="col-sm-3">
      <p class="text-center" style="font-size: large;"><strong>Ori Tabibi</strong></p><br>
      <a href="#demo3" data-toggle="collapse">
        <img src="https://i.ibb.co/jWR2NsS/ori.jpg" class="img-circle person" alt="Random Name" width="255" height="255">
      </a>
      <div id="demo3" class="collapse">
        <p style="font-size: large;">4th year software engineering student with a specialization in data science at the Sami Shamoon Academic College of Engineering.</p>
      </div>
    </div>

    <div class="col-sm-3">
        <p class="text-center" style="font-size: large;"><strong>Sean Assolin</strong></p><br>
        <a href="#demo4" data-toggle="collapse">
          <img src="https://i.ibb.co/ZhPN1c9/sean.jpg" class="img-circle person" alt="Random Name" width="255" height="255">
        </a>
        <div id="demo4" class="collapse">
          <p style="font-size: large;">4th year software engineering student with a specialization in data science at the Sami Shamoon Academic College of Engineering.</p>
        </div>
      </div>

  </div>
</div>

<!-- Container (predict Section) -->
<div id="tour" class="bg-1">
  <div class="container">
    <h3 class="text-center">PREDICTION</h3>
      <div class="buttons">
        <p id="upload" style="font-weight:bold; font-size:25px">Upload image:</p>

        <label for="models">Model:</label>
          <select name="models" id="models">
            <option value="Xception">Xception</option>
            <option value="VGG16">VGG16</option>
            <option value="Efficienet">Efficientnet</option>
            <option value="Nasnet">Nasnet</option>
          </select>

        <input id="cropzee-input" type="file" accept="image/*">
        <label for="cropzee-input" class="image-previewer" data-cropzee="cropzee-input"></label>
        <div>
          <button id="predict-button">Predict</button>
        </div>
        <br><br>
        
        <div id = "left">
          <p style="font-weight:bold; font-size:25px" id = "Predictions"></p>    
          <p><span id="male-prediction"></span></p>
          <p><span id="female-prediction"></span></p>
          <p style="font-size:30px"><span id="loading"></span></p>
          <p><span id="patches-number"></span></p>
          <p><span id="classification"></span></p>
        </div>
      </div>
   <script src="/static/cropzee.js" defer ></script> 
   <script>
     $(document).ready(function(){
      $("#cropzee-input").cropzee({startSize: [100, 100, '%'],
      returnImageMode:'data-url',    
    });
      });
        let x;
        $("#predict-button").click(function(){
          const img = cropzeeGetImage('cropzee-input')
          if (img == ""){
            $("#loading").text("Please upload image");
          }
          else{
            $("#loading").text("Processing image...");
            $("#male-prediction").text("");
            $("#female-prediction").text("");
            $("#patches-number").text("");
            $("#classification").text("");
            x = document.getElementById("models").value;
            $("#Predictions").text("");
            let message = {
                image: img.replace(/^data:image\/(png|jpg|jpeg);base64,/, ""),
                model: x
            }
            $.post("http://localhost:5000/predict", JSON.stringify(message), function(response){
                $("#loading").text("");
                $("#male-prediction").text("Male: " + response.prediction.Male.toFixed(0) + "%");
                $("#female-prediction").text("Female: " + response.prediction.Female.toFixed(0) +"%");
                $("#patches-number").text("Number of patches extracted from image: " + response.prediction.patches_count);
                $("#classification").text("Final identification: " + response.prediction.classification);
                $("#Predictions").text("Predictions:");
                console.log(response);
            });
          }
      });       
    </script>
  </div>
</div>

<!-- Container (Contact Section) -->
<div id="contact" class="container">
  <h3 class="text-center">Contact us</h3>
  <br>
  <div class="row">
    <div class="col-md-4">
      <p>Ori Tabibi</p>
      <p><span class="glyphicon glyphicon-map-marker"></span> Beer-Sheva, IL</p>
      <p><span class="glyphicon glyphicon-envelope"></span> Email: Orita4@ac.sce.ac.il</p>
      <br>
      <p>Sean Assolin</p>
      <p><span class="glyphicon glyphicon-map-marker"></span> Dimona, IL</p>
      <p><span class="glyphicon glyphicon-envelope"></span> Email: shonas@ac.sce.ac.il</p>
    </div>
    <form action="https://formsubmit.co/shonas@ac.sce.ac.il" method="POST">
      <div class="col-md-8">
        <div class="row">
          <div class="col-sm-6 form-group">
            <input class="form-control" id="name" name="name" placeholder="Your name" type="text" required>
          </div>
          <div class="col-sm-6 form-group">
            <input class="form-control" id="email" name="email" placeholder="Your email" type="email" required>
          </div>
        </div>
        <textarea class="form-control" id="comments" name="comments" placeholder="Leave your comment here" rows="5"></textarea>
        <br>
        
        <div class="row">
          <div class="col-md-12 form-group">
            <button class="btn pull-right" type="submit">Send</button>
          </div>
          
        </div>
      </div>
      <input type="hidden" name="_captcha" value="true">
      <input type="hidden" name="_next" value="http://localhost:5000/#contact">
      <input type="hidden" name="_template" value="box">
      <input type="hidden" name="_cc" value="orita4@ac.sce.ac.il">
      <script>
        window.addEventListener("load", ()=> {
          const {hash} = window.location
          if (hash == "#contact"){
            swal({
              title: "The email was sent successfully!",
              text: "We will reply as soon as possible",
              icon: "success",
              buttons: "OK",
            });
          }
        })
      </script>
    </form>
  </div>
</div>

<!-- Footer -->
<footer class="text-center">
  <a class="up-arrow" href="#myPage" data-toggle="tooltip" title="TO TOP">
    <span class="glyphicon glyphicon-chevron-up"></span>
  </a><br><br>
  <p>Gender identification - All rights reserved Â© 2021 </p> 
</footer>

<script>
$(document).ready(function(){
  // Initialize Tooltip
  $('[data-toggle="tooltip"]').tooltip(); 
  
  // Add smooth scrolling to all links in navbar + footer link
  $(".navbar a, footer a[href='#myPage']").on('click', function(event) {

    // Make sure this.hash has a value before overriding default behavior
    if (this.hash !== "") {

      // Prevent default anchor click behavior
      event.preventDefault();

      // Store hash
      var hash = this.hash;

      // Using jQuery's animate() method to add smooth page scroll
      // The optional number (900) specifies the number of milliseconds it takes to scroll to the specified area
      $('html, body').animate({
        scrollTop: $(hash).offset().top
      }, 900, function(){
   
        // Add hash (#) to URL when done scrolling (default click behavior)
        window.location.hash = hash;
      });
    } // End if
  });
})
</script>
</body>
</html>